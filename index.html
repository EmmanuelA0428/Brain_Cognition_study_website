<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Pathway Memorization Tool</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #166088;
            --accent: #4fc3f7;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text: #333333;
            --memorized: #4CAF50;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--bg);
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1, h2, h3 {
            color: var(--secondary);
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: none;
            transition: 0.3s;
        }
        
        .tab.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            animation: fadeEffect 0.5s;
        }
        
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        
        .flashcard {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin: 15px 0;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
            position: relative;
        }
        
        .flashcard:hover {
            transform: translateY(-5px);
        }
        
        .flashcard .front, .flashcard .back {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backface-visibility: hidden;
            transition: transform 0.6s;
        }
        
        .flashcard .front {
            transform: rotateY(0deg);
        }
        
        .flashcard .back {
            transform: rotateY(180deg);
            color: var(--primary);
            font-weight: bold;
        }
        
        .flashcard.flipped .front {
            transform: rotateY(180deg);
        }
        
        .flashcard.flipped .back {
            transform: rotateY(0deg);
        }
        
        .flashcard.memorized {
            border-left: 5px solid var(--memorized);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--secondary);
        }
        
        button.memorized-btn {
            background-color: var(--memorized);
            margin-top: 10px;
        }
        
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 20px;
            background-color: var(--accent);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .section-progress {
            display: flex;
            gap: 5px;
            margin: 15px 0;
        }
        
        .section-progress-item {
            flex: 1;
            height: 10px;
            background-color: #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .section-progress-item.active {
            background-color: var(--primary);
        }
        
        .section-progress-item.completed {
            background-color: var(--memorized);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .custom-terms {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        
        .custom-term {
            background-color: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .custom-term.memorized {
            background-color: var(--memorized);
        }
        
        .custom-term button {
            background: none;
            border: none;
            color: white;
            margin-left: 5px;
            padding: 0;
            font-size: 12px;
        }
        
        .stats {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 600px) {
            .controls {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Visual Pathway Memorization Tool</h1>
    
    <div class="tab-container">
        <button class="tab active" onclick="openTab('flashcards')">Flashcards</button>
        <button class="tab" onclick="openTab('custom')">Add Terms</button>
    </div>
    
    <!-- Flashcards Tab -->
    <div id="flashcards" class="tab-content" style="display: block;">
        <h2>Flashcards</h2>
        
        <div class="stats">
            <p>Total Terms: <span id="total-terms">0</span></p>
            <p>Memorized: <span id="memorized-count">0</span></p>
            <p>Sections: <span id="section-count">0</span></p>
        </div>
        
        <div class="section-progress" id="section-progress">
            <!-- Section progress indicators will be added here -->
        </div>
        
        <div class="controls">
            <button id="prev-card">Previous</button>
            <span id="card-count">1/0</span>
            <button id="next-card">Next</button>
        </div>
        
        <div id="flashcard-container" class="flashcard">
            <div class="front">
                <p>Click to flip</p>
            </div>
            <div class="back">
                <p>Answer appears here</p>
            </div>
        </div>
        
        <button id="memorized-btn" class="memorized-btn">Mark as Memorized</button>
        
        <div class="progress-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
    </div>
    
    <!-- Custom Terms Tab -->
    <div id="custom" class="tab-content">
        <h2>Add Custom Terms</h2>
        <div class="form-group">
            <label for="term">Term:</label>
            <input type="text" id="term" placeholder="E.g., Nasal Retina">
        </div>
        <div class="form-group">
            <label for="definition">Definition:</label>
            <textarea id="definition" rows="3" placeholder="E.g., The inner half of the retina that crosses at the optic chiasm"></textarea>
        </div>
        <button id="add-term">Add Term</button>
        
        <h3>Your Custom Terms:</h3>
        <div id="custom-terms-list" class="custom-terms">
            <!-- Custom terms will appear here -->
        </div>
    </div>
    
    <script>
        // Flashcards data
        let flashcards = [
            { front: "What does the left visual field correspond to in the retina?", back: "The right half of each retina", memorized: false },
            { front: "What does the right visual field correspond to in the retina?", back: "The left half of each retina", memorized: false },
            { front: "Which part of the retina crosses at the optic chiasm?", back: "Nasal retina (inner half)", memorized: false },
            { front: "Which part of the retina stays on the same side?", back: "Temporal retina (outer half)", memorized: false },
            { front: "Where does information from the right visual field ultimately process?", back: "Left visual cortex", memorized: false },
            { front: "Where does information from the left visual field ultimately process?", back: "Right visual cortex", memorized: false }
        ];
        
        // App state
        let currentCardIndex = 0;
        let currentSection = 0;
        let sections = [];
        let customTerms = JSON.parse(localStorage.getItem('customTerms')) || [];
        let memorizedTerms = JSON.parse(localStorage.getItem('memorizedTerms')) || [];
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Load custom terms and sync with flashcards
            customTerms.forEach(item => {
                if (!flashcards.some(card => card.front === item.term)) {
                    flashcards.push({ 
                        front: item.term, 
                        back: item.definition,
                        memorized: memorizedTerms.includes(item.term)
                    });
                }
            });
            
            // Initialize sections
            updateSections();
            updateFlashcard();
            renderCustomTerms();
            updateStats();
            
            // Event listeners
            document.getElementById('flashcard-container').addEventListener('click', flipCard);
            document.getElementById('prev-card').addEventListener('click', prevCard);
            document.getElementById('next-card').addEventListener('click', nextCard);
            document.getElementById('add-term').addEventListener('click', addCustomTerm);
            document.getElementById('memorized-btn').addEventListener('click', toggleMemorized);
        });
        
        // Tab functionality
        function openTab(tabName) {
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].style.display = 'none';
            }
            
            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].className = tabs[i].className.replace(' active', '');
            }
            
            document.getElementById(tabName).style.display = 'block';
            event.currentTarget.className += ' active';
        }
        
        // Group flashcards into sections of 5
        function updateSections() {
            sections = [];
            const sectionSize = 5;
            
            for (let i = 0; i < flashcards.length; i += sectionSize) {
                sections.push(flashcards.slice(i, i + sectionSize));
            }
            
            renderSectionProgress();
        }
        
        // Render section progress indicators
        function renderSectionProgress() {
            const container = document.getElementById('section-progress');
            container.innerHTML = '';
            
            sections.forEach((section, index) => {
                const sectionItem = document.createElement('div');
                sectionItem.className = 'section-progress-item';
                if (index === currentSection) {
                    sectionItem.classList.add('active');
                }
                
                // Check if all cards in section are memorized
                const allMemorized = section.every(card => card.memorized);
                if (allMemorized) {
                    sectionItem.classList.add('completed');
                }
                
                sectionItem.addEventListener('click', () => {
                    currentSection = index;
                    currentCardIndex = 0;
                    renderSectionProgress();
                    updateFlashcard();
                });
                
                container.appendChild(sectionItem);
            });
        }
        
        // Update flashcard display
        function updateFlashcard() {
            if (sections.length === 0 || sections[currentSection].length === 0) {
                document.getElementById('flashcard-container').style.display = 'none';
                document.getElementById('memorized-btn').style.display = 'none';
                return;
            }
            
            document.getElementById('flashcard-container').style.display = 'flex';
            document.getElementById('memorized-btn').style.display = 'block';
            
            const card = sections[currentSection][currentCardIndex];
            const front = document.querySelector('.front p');
            const back = document.querySelector('.back p');
            
            front.textContent = card.front;
            back.textContent = card.back;
            
            // Update memorized state
            const flashcard = document.getElementById('flashcard-container');
            if (card.memorized) {
                flashcard.classList.add('memorized');
                document.getElementById('memorized-btn').textContent = 'Mark as Unmemorized';
            } else {
                flashcard.classList.remove('memorized');
                document.getElementById('memorized-btn').textContent = 'Mark as Memorized';
            }
            
            // Update counters
            document.getElementById('card-count').textContent = `${currentCardIndex + 1}/${sections[currentSection].length}`;
            document.getElementById('progress-bar').style.width = `${(currentCardIndex / (sections[currentSection].length - 1)) * 100}%`;
            
            // Reset flip state
            flashcard.classList.remove('flipped');
        }
        
        function flipCard() {
            this.classList.toggle('flipped');
        }
        
        function prevCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateFlashcard();
            }
        }
        
        function nextCard() {
            if (currentCardIndex < sections[currentSection].length - 1) {
                currentCardIndex++;
                updateFlashcard();
            }
        }
        
        function toggleMemorized() {
            const card = sections[currentSection][currentCardIndex];
            card.memorized = !card.memorized;
            
            // Update memorized terms list
            if (card.memorized) {
                if (!memorizedTerms.includes(card.front)) {
                    memorizedTerms.push(card.front);
                }
            } else {
                memorizedTerms = memorizedTerms.filter(term => term !== card.front);
            }
            
            localStorage.setItem('memorizedTerms', JSON.stringify(memorizedTerms));
            updateFlashcard();
            renderSectionProgress();
            updateStats();
            
            // Update custom terms list if this is a custom term
            renderCustomTerms();
        }
        
        // Custom terms functions
        function addCustomTerm() {
            const term = document.getElementById('term').value.trim();
            const definition = document.getElementById('definition').value.trim();
            
            if (term && definition) {
                // Add to custom terms
                customTerms.push({ term, definition });
                localStorage.setItem('customTerms', JSON.stringify(customTerms));
                
                // Add to flashcards
                flashcards.push({ 
                    front: term, 
                    back: definition,
                    memorized: false
                });
                
                // Clear inputs and refresh
                document.getElementById('term').value = '';
                document.getElementById('definition').value = '';
                
                updateSections();
                renderCustomTerms();
                updateStats();
                
                // Switch to flashcards tab and show the new card
                openTab('flashcards');
                currentSection = sections.length - 1;
                currentCardIndex = 0;
                updateFlashcard();
            }
        }
        
        function renderCustomTerms() {
            const container = document.getElementById('custom-terms-list');
            container.innerHTML = '';
            
            customTerms.forEach((item, index) => {
                const termElement = document.createElement('div');
                termElement.className = 'custom-term';
                if (memorizedTerms.includes(item.term)) {
                    termElement.classList.add('memorized');
                }
                
                termElement.innerHTML = `
                    ${item.term}
                    <button onclick="deleteTerm(${index})">Ã—</button>
                `;
                container.appendChild(termElement);
            });
        }
        
        function deleteTerm(index) {
            const termToDelete = customTerms[index].term;
            
            // Remove from custom terms
            customTerms.splice(index, 1);
            localStorage.setItem('customTerms', JSON.stringify(customTerms));
            
            // Remove from flashcards
            const cardIndex = flashcards.findIndex(card => card.front === termToDelete);
            if (cardIndex !== -1) {
                flashcards.splice(cardIndex, 1);
                
                // Update current card index if needed
                if (currentCardIndex >= cardIndex && currentCardIndex > 0) {
                    currentCardIndex--;
                }
            }
            
            // Remove from memorized terms
            memorizedTerms = memorizedTerms.filter(term => term !== termToDelete);
            localStorage.setItem('memorizedTerms', JSON.stringify(memorizedTerms));
            
            // Refresh everything
            updateSections();
            renderCustomTerms();
            updateStats();
            updateFlashcard();
        }
        
        function updateStats() {
            document.getElementById('total-terms').textContent = flashcards.length;
            document.getElementById('memorized-count').textContent = memorizedTerms.length;
            document.getElementById('section-count').textContent = sections.length;
        }
    </script>
</body>
</html>
